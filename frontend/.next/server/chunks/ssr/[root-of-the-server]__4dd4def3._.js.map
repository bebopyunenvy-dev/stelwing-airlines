{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Huang%20Lei/Documents/next-start/app/ch04-state/cart/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\n\n// 定義商品項目的型別\ninterface ProductItem {\n  id: number;\n  name: string;\n  price: number;\n}\n\n// 定義商品項目的型別\ninterface CartItem {\n  id: number;\n  name: string;\n  count: number;\n  price: number;\n}\n\n// 商品資料範例(注意沒有count屬性)\nconst products: ProductItem[] = [\n  {\n    id: 0,\n    name: '小熊餅乾',\n    price: 50,\n  },\n  {\n    id: 1,\n    name: '巧克力豆餅乾',\n    price: 100,\n  },\n  {\n    id: 2,\n    name: '小老板海苔',\n    price: 150,\n  },\n];\n\nconst initialItems: CartItem[] = [\n  {\n    id: 0,\n    name: '小熊餅乾',\n    count: 1,\n    price: 30,\n  },\n  {\n    id: 1,\n    name: '巧克力豆餅乾',\n    count: 5,\n    price: 20,\n  },\n  {\n    id: 2,\n    name: '小老板海苔',\n    count: 2,\n    price: 10,\n  },\n];\n\nexport default function ShoppingCartPage() {\n  const [items, setItems] = useState<CartItem[]>(initialItems);\n\n  const onIncrease = (itemId: number) => {\n    const nextItems = items.map((v) => {\n      if (v.id === itemId) {\n        return { ...v, count: v.count + 1 };\n      } else {\n        return v;\n      }\n    });\n\n    setItems(nextItems);\n  };\n\n  const onDecrease = (itemId: number) => {\n    const nextItems = items.map((v) => {\n      if (v.id === itemId) {\n        return { ...v, count: v.count - 1 };\n      } else {\n        return v;\n      }\n    });\n\n    setItems(nextItems);\n  };\n\n  const onRemove = (itemId: number) => {\n    const nextItems = items.filter((v) => {\n      return v.id !== itemId;\n    });\n    setItems(nextItems);\n  };\n\n  const onAdd = (product: ProductItem) => {\n    const foundIndex = items.findIndex((v) => v.id === product.id);\n\n    if(foundIndex !== -1){\n      onIncrease(product.id);\n    } else {\n      const newItem = { ...product, count: 1 };\n      const nextItems = [newItem, ...items];\n      setItems(nextItems);\n    }\n\n  };\n\n  const totalQty = items.reduce((acc, item) => acc + item.count, 0);\n  const totalAmount = items.reduce(\n    (acc, item) => acc + item.count * item.price,\n    0\n  );\n\n  return (\n    <>\n      <h1>商品列表</h1>\n      <ul>\n        {products.map((product) => {\n          return (\n            <li key={product.id}>\n              {product.name}(NT${product.price})\n              <button\n                onClick={() => {\n                  onAdd(product);\n                }}\n              >\n                加入購物車\n              </button>\n            </li>\n          );\n        })}\n      </ul>\n      <hr />\n      <h1>購物車</h1>\n      <ul>\n        {items.map((item) => (\n          <li key={item.id}>\n            {item.name} (<b>{item.count}</b>)\n            <button\n              onClick={() => {\n                onIncrease(item.id);\n              }}\n            >\n              +\n            </button>\n            <button\n              onClick={() => {\n                if (item.count === 1) {\n                  alert('至少要購買一件商品');\n                } else {\n                  onDecrease(item.id);\n                }\n              }}\n            >\n              –\n            </button>\n            <button\n              onClick={() => {\n                // 比較好的使用者體驗，刪除前要加確認視窗\n                if (confirm('你確定要從購物車中刪除此項目?')) {\n                  onRemove(item.id);\n                }\n              }}\n            >\n              x\n            </button>\n          </li>\n        ))}\n      </ul>\n      <p>\n        總數量: {totalQty} / 總金額: {totalAmount}\n      </p>\n    </>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 240, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Huang%20Lei/Documents/next-start/node_modules/next/src/server/route-modules/app-page/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":"AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,QAAQ;;KAElC;IACL,IAAIF,QAAQC,GAAG,CAACK,yBAAyB,EAAE;;SAcpC;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1C,IAAIP,QAAQC,GAAG,CAACO,SAAS,eAAE;gBACzBL,OAAOC,OAAO,GAAGC,QAAQ;YAC3B,OAAO;;QAGT,OAAO;;IAOT;AACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 259, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Huang%20Lei/Documents/next-start/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 264, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Huang%20Lei/Documents/next-start/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n"],"names":["module","exports","require","vendored","React"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,KAAK","ignoreList":[0],"debugId":null}}]
}